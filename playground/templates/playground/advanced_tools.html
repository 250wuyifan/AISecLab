{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<style>
.tools-main { margin-left: 0 !important; max-width: 100% !important; }
.tools-main ~ .sidebar, #sidebarMenu { display: none !important; }

.tools-header { margin-bottom: 1rem; }
.tool-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
@media (max-width: 768px) { .tool-grid { grid-template-columns: 1fr; } }

.tool-card {
    background: var(--surface);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 1rem 1.1rem;
}
.tool-card h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0 0 0.35rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.tool-card .tool-desc { font-size: 0.8rem; color: var(--muted); margin-bottom: 0.6rem; line-height: 1.4; }
.tool-card .tool-section { font-size: 0.78rem; margin-bottom: 0.5rem; }
.tool-card .tool-section-title { font-weight: 600; color: var(--text); margin-bottom: 0.25rem; }
.tool-card .tool-section ul { margin: 0; padding-left: 1rem; color: var(--muted); line-height: 1.5; }
.tool-card pre {
    background: var(--bg-2);
    padding: 0.4rem 0.6rem;
    border-radius: 4px;
    font-size: 0.75rem;
    margin: 0 0 0.4rem 0;
    overflow-x: auto;
}
.tool-card .doc-link { font-size: 0.75rem; }
.tool-card .doc-link a { text-decoration: none; }
.tool-card .status { font-size: 0.7rem; padding: 0.2rem 0.5rem; border-radius: 4px; }
.tool-card .status.installed { background: rgba(34, 197, 94, 0.15); color: #22c55e; }
.tool-card .status.not-installed { background: rgba(245, 158, 11, 0.15); color: #f59e0b; }
.tools-footer { margin-top: 1rem; padding: 0.75rem 1rem; background: var(--surface); border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.8rem; color: var(--muted); }
</style>
{% endblock %}

{% block content %}
<main class="tools-main">
    <div class="container py-3" style="max-width: 1000px;">
        <div class="d-flex justify-content-between align-items-center tools-header">
            <div class="d-flex align-items-center gap-2">
                <a href="{% url 'playground:redteam_index' %}" class="btn btn-outline-secondary btn-sm">â† çº¢é˜Ÿ</a>
                <h1 class="h5 mb-0 fw-bold">é«˜çº§çº¢é˜Ÿå·¥å…·</h1>
            </div>
        </div>

        <div class="tool-grid">
            <!-- PyRIT -->
            <div class="tool-card">
                <h4>ğŸ”¬ PyRIT <span class="status {{ pyrit_status }}">{% if pyrit_installed %}å·²å®‰è£…{% else %}æœªå®‰è£…{% endif %}</span></h4>
                <div class="tool-desc">å¾®è½¯å¼€æºçš„ AI çº¢é˜Ÿæ¡†æ¶ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æç¤ºæ³¨å…¥ã€å¤šè½®å¯¹è¯æ”»å‡»ã€æ”»å‡»æ ‘ç”Ÿæˆï¼Œå¯æ¥ Azure OpenAI / OpenAI ç­‰ã€‚</div>
                <div class="tool-section">
                    <div class="tool-section-title">å®‰è£…</div>
                    <pre>pip install pyrit</pre>
                </div>
                <div class="tool-section">
                    <div class="tool-section-title">ä½¿ç”¨å‰å‡†å¤‡</div>
                    <ul>
                        <li>éœ€é…ç½® LLMï¼šè®¾ç½®ç¯å¢ƒå˜é‡ <code>AZURE_OPENAI_API_KEY</code> æˆ– <code>OPENAI_API_KEY</code>ï¼Œæˆ–ä½¿ç”¨ <code>pyrit configure</code> äº¤äº’é…ç½®ã€‚</li>
                        <li>æ”¯æŒå¤šç§åç«¯ï¼ˆAzure OpenAIã€OpenAIã€Ollama ç­‰ï¼‰ï¼Œè¯¦è§æ–‡æ¡£ã€‚</li>
                    </ul>
                </div>
                <div class="doc-link">ğŸ“„ <a href="https://github.com/Azure/PyRIT" target="_blank" rel="noopener">GitHub Â· PyRIT</a> Â· <a href="https://github.com/Azure/PyRIT#readme" target="_blank" rel="noopener">ä½¿ç”¨è¯´æ˜</a></div>
            </div>

            <!-- TextAttack -->
            <div class="tool-card">
                <h4>ğŸ“ TextAttack <span class="status {{ textattack_status }}">{% if textattack_installed %}å·²å®‰è£…{% else %}æœªå®‰è£…{% endif %}</span></h4>
                <div class="tool-desc">NLP å¯¹æŠ—æ”»å‡»æ¡†æ¶ï¼šåŒä¹‰è¯æ›¿æ¢ã€å­—ç¬¦æ‰°åŠ¨ã€è¯­ä¹‰ä¿æŒæ”»å‡»ï¼ˆTextFoolerã€BERT-Attackã€PWWS ç­‰ï¼‰ï¼Œç”¨äºè¯„ä¼°åˆ†ç±»/æ‘˜è¦æ¨¡å‹é²æ£’æ€§ã€‚</div>
                <div class="tool-section">
                    <div class="tool-section-title">å®‰è£…</div>
                    <pre>pip install textattack</pre>
                </div>
                <div class="tool-section">
                    <div class="tool-section-title">ä½¿ç”¨å‰å‡†å¤‡</div>
                    <ul>
                        <li>é¦–æ¬¡ä½¿ç”¨å»ºè®®è¿è¡Œ <code>textattack download</code> ä¸‹è½½é»˜è®¤æ¨¡å‹ä¸æ•°æ®é›†ã€‚</li>
                        <li>å¯å¯¹æœ¬åœ°æ¨¡å‹æˆ– HuggingFace æ¨¡å‹åšæ”»å‡»ï¼Œä¾‹å¦‚ï¼š<code>textattack attack --model bert-base-uncased --recipe textfooler --dataset imdb</code>ã€‚</li>
                    </ul>
                </div>
                <div class="doc-link">ğŸ“„ <a href="https://github.com/QData/TextAttack" target="_blank" rel="noopener">GitHub Â· TextAttack</a> Â· <a href="https://textattack.readthedocs.io/" target="_blank" rel="noopener">æ–‡æ¡£</a></div>
            </div>

            <!-- Promptfoo -->
            <div class="tool-card">
                <h4>ğŸ§ª Promptfoo <span class="status not-installed">æœªå®‰è£…</span></h4>
                <div class="tool-desc">LLM æç¤ºè¯æµ‹è¯•ä¸è¯„ä¼°ï¼šæ‰¹é‡æµ‹ promptã€å¤šæ¨¡å‹å¯¹æ¯”ã€çº¢é˜Ÿ/è¶Šç‹±æµ‹è¯•å¥—ä»¶ï¼Œå¯åšå›å½’æµ‹è¯•å’Œ CI é›†æˆã€‚</div>
                <div class="tool-section">
                    <div class="tool-section-title">å®‰è£…</div>
                    <pre>npm install -g promptfoo</pre>
                </div>
                <div class="tool-section">
                    <div class="tool-section-title">ä½¿ç”¨å‰å‡†å¤‡</div>
                    <ul>
                        <li>éœ€ Node.js ç¯å¢ƒã€‚å®‰è£…åæ‰§è¡Œ <code>promptfoo init</code> ç”Ÿæˆç¤ºä¾‹é…ç½®ã€‚</li>
                        <li>åœ¨ YAML ä¸­é…ç½®è¦æµ‹çš„æ¨¡å‹ï¼ˆOpenAIã€Ollamaã€Azure ç­‰ï¼‰å’Œæµ‹è¯•ç”¨ä¾‹ï¼Œç”¨ <code>promptfoo eval</code> è·‘è¯„ä¼°ã€‚</li>
                    </ul>
                </div>
                <div class="doc-link">ğŸ“„ <a href="https://github.com/promptfoo/promptfoo" target="_blank" rel="noopener">GitHub Â· promptfoo</a> Â· <a href="https://www.promptfoo.dev/docs/intro/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></div>
            </div>

            <!-- Rebuff -->
            <div class="tool-card">
                <h4>ğŸ›¡ï¸ Rebuff <span class="status not-installed">æœªå®‰è£…</span></h4>
                <div class="tool-desc">æç¤ºæ³¨å…¥æ£€æµ‹æœåŠ¡ï¼šå¯å‘å¼è§„åˆ™ + LLM åˆ†ç±» + å‘é‡ç›¸ä¼¼åº¦ + Canary Tokenï¼Œå¯é›†æˆåˆ°åº”ç”¨ä¸­å¯¹ç”¨æˆ·è¾“å…¥åšæ£€æµ‹ã€‚</div>
                <div class="tool-section">
                    <div class="tool-section-title">å®‰è£…</div>
                    <pre>pip install rebuff</pre>
                </div>
                <div class="tool-section">
                    <div class="tool-section-title">ä½¿ç”¨å‰å‡†å¤‡</div>
                    <ul>
                        <li>å¯ç”¨äº‘ç«¯ APIï¼ˆ<a href="https://rebuff.ai" target="_blank" rel="noopener">rebuff.ai</a>ï¼‰æˆ–è‡ªæ‰˜ç®¡ã€‚äº‘ç«¯éœ€æ³¨å†Œè·å– <code>REBUFF_API_KEY</code>ã€‚</li>
                        <li>åœ¨ä»£ç ä¸­è°ƒç”¨ <code>rebuff.detect()</code> æ£€æµ‹è¾“å…¥æ˜¯å¦å«æç¤ºæ³¨å…¥ï¼Œè¿”å›åˆ†æ•°ä¸å»ºè®®ã€‚</li>
                    </ul>
                </div>
                <div class="doc-link">ğŸ“„ <a href="https://github.com/protectai/rebuff" target="_blank" rel="noopener">GitHub Â· Rebuff</a> Â· <a href="https://docs.rebuff.ai/" target="_blank" rel="noopener">æ–‡æ¡£</a></div>
            </div>
        </div>

        <div class="tools-footer">
            <strong>è¯´æ˜ï¼š</strong> å®‰è£…ååˆ·æ–°æœ¬é¡µå¯æ›´æ–°ã€Œå·²å®‰è£…ã€çŠ¶æ€ã€‚ä¸Šè¿°å·¥å…·å‡åœ¨æœ¬åœ°æˆ–è‡ªæœ‰ç¯å¢ƒä¸­è¿è¡Œï¼Œä½¿ç”¨å‰è¯·é˜…è¯»å„é¡¹ç›®æ–‡æ¡£å®Œæˆé…ç½®ï¼ˆAPI Keyã€æ¨¡å‹ã€æ•°æ®é›†ç­‰ï¼‰ã€‚
        </div>
    </div>
</main>
{% endblock %}
